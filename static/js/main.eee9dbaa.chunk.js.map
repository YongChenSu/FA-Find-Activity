{"version":3,"sources":["utils/utils.js","contexts.js","styles/base/variable.js","routes/index.js","App.js","index.js","WebAPI.js"],"names":["setAuthToken","token","localStorage","setItem","getAuthToken","getItem","AuthContext","createContext","theme","main","$colorWhite","$colorRed","$colorLightGreen","$colorGreen","$colorLightOrange","$colorYellow","$colorGrey","$colorLightGrey","$borderRadius","$fontFamily","weatherCardBackgroundColor","weatherCardColor","weatherCardHighLight","dark","Home","lazy","FindActivity","Activity","NewActivity","Login","Profile","Routes","fallback","exact","path","component","App","useState","activityData","setActivityData","fetchActivityData","useCallback","a","Promise","all","fetchMoviesData","fetchMusicPerformanceData","fetchParentChildActivityData","fetchLectureData","fetchExhibitionData","moviesData","musicPerformanceData","parentChildActivityData","lectureData","exhibitionData","useEffect","modifiedData","useMemo","filter","data","imageUrl","map","index","id","user","setUser","getMe","then","response","ok","Provider","value","ReactDOM","render","document","getElementById","fetch","json","LIDEMY_BASE_URL","login","username","password","method","headers","body","JSON","stringify","res","register","nickname","authorization"],"mappings":"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","file":"static/js/main.eee9dbaa.chunk.js","sourcesContent":["const TOKEN_NAME = \"token\";\r\n\r\nexport const setAuthToken = (token) => {\r\n  localStorage.setItem(TOKEN_NAME, token);\r\n};\r\n\r\nexport const getAuthToken = () => {\r\n  return localStorage.getItem(TOKEN_NAME);\r\n};\r\n","import { createContext } from \"react\";\r\n\r\nexport const AuthContext = createContext(null);\r\n","const theme = {\r\n  main: {\r\n    $colorWhite: \"#f8f8f8\",\r\n    $colorRed: \"#e6756B\",\r\n    $colorLightGreen: \"#c4c88f\",\r\n    $colorGreen: \"#8b8974\",\r\n    $colorLightOrange: \"#fae1d2\",\r\n    $colorYellow: \"#F9d893\",\r\n\r\n    $colorGrey: \"#777\",\r\n    $colorLightGrey: \"#aaa\",\r\n\r\n    $borderRadius: \"0.5rem\",\r\n    $fontFamily: \"'Varela Round', 'cwTeXYen'\",\r\n\r\n    weatherCardBackgroundColor: \"#eee\",\r\n    weatherCardColor: \"#666\",\r\n    weatherCardHighLight: \"#555\",\r\n  },\r\n  dark: {\r\n    weatherCardBackgroundColor: \"#666\",\r\n    weatherCardColor: \"#ddd\",\r\n    weatherCardHighLight: \"#fff\",\r\n  },\r\n};\r\n\r\nexport default theme;\r\n","import React, { Suspense, lazy } from \"react\";\r\nimport { HashRouter as Switch, Route } from \"react-router-dom\";\r\nconst Home = lazy(() => import(\"../pages/Home\"));\r\nconst FindActivity = lazy(() => import(\"../pages/FindActivity\"));\r\nconst Activity = lazy(() => import(\"../pages/Activity\"));\r\nconst NewActivity = lazy(() => import(\"../pages/NewActivity\"));\r\nconst Login = lazy(() => import(\"../pages/Login\"));\r\nconst Profile = lazy(() => import(\"../pages/Profile\"));\r\n\r\nconst Routes = () => {\r\n  return (\r\n    <Suspense fallback={<div></div>}>\r\n      <Switch>\r\n        <Route exact path=\"/\" component={Home} />\r\n        <Route path=\"/find-activity\" component={FindActivity} />\r\n        <Route path=\"/activity/:id\" component={Activity} />\r\n        <Route path=\"/new-activity\" component={NewActivity} />\r\n        <Route path=\"/login-page\" component={Login} />\r\n        <Route path=\"/profile-page\" component={Profile} />\r\n      </Switch>\r\n    </Suspense>\r\n  );\r\n};\r\n\r\nexport default Routes;\r\n","import React, { useState, useEffect, useCallback, useMemo } from \"react\";\r\nimport Routes from \"./routes\";\r\nimport { HashRouter as Router } from \"react-router-dom\";\r\nimport \"./styles/main.sass\";\r\nimport { ThemeProvider } from \"emotion-theming\";\r\nimport theme from \"./styles/base/variable\";\r\nimport { AuthContext } from \"../src/contexts\";\r\nimport { getAuthToken } from \"./utils/utils\";\r\nimport {\r\n  fetchExhibitionData,\r\n  fetchParentChildActivityData,\r\n  fetchMoviesData,\r\n  fetchMusicPerformanceData,\r\n  fetchLectureData,\r\n  getMe,\r\n} from \"../src/WebAPI\";\r\n\r\nconst App = () => {\r\n  const [activityData, setActivityData] = useState([]);\r\n  const fetchActivityData = useCallback(async () => {\r\n    const [\r\n      moviesData,\r\n      musicPerformanceData,\r\n      parentChildActivityData,\r\n      lectureData,\r\n      exhibitionData,\r\n    ] = await Promise.all([\r\n      fetchMoviesData(),\r\n      fetchMusicPerformanceData(),\r\n      fetchParentChildActivityData(),\r\n      fetchLectureData(),\r\n      fetchExhibitionData(),\r\n    ]);\r\n\r\n    setActivityData([\r\n      ...moviesData,\r\n      ...musicPerformanceData,\r\n      ...parentChildActivityData,\r\n      ...lectureData,\r\n      ...exhibitionData,\r\n    ]);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    fetchActivityData();\r\n  }, [fetchActivityData]);\r\n\r\n  const modifiedData = useMemo(() =>\r\n    activityData\r\n      .filter((data) => data.imageUrl !== \"\")\r\n      .map((data, index) => {\r\n        data.id = index;\r\n        return data;\r\n      })\r\n  );\r\n\r\n  const [user, setUser] = useState(null);\r\n  useEffect(() => {\r\n    if (getAuthToken() !== null) {\r\n      getMe().then((response) => {\r\n        if (response.ok === 1) {\r\n          setUser(response.data);\r\n        }\r\n      });\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <AuthContext.Provider value={{ user, setUser, modifiedData }}>\r\n      <ThemeProvider theme={theme.main}>\r\n        <Router>\r\n          <Routes />\r\n        </Router>\r\n      </ThemeProvider>\r\n    </AuthContext.Provider>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport App from \"./App\";\r\n\r\nReactDOM.render(<App />, document.getElementById(\"root\"));\r\n","import { getAuthToken } from \"./utils/utils\";\r\n\r\n// const AUTHORIZATION_KEY = \"CWB-15DFF2FC-FFFB-49E9-BF7F-EBB9164F4B47\";\r\n// const CURRENT_WEATHER_BASE_URL =\r\n//   \"https://opendata.cwb.gov.tw/api/v1/rest/datastore/O-A0003-001?Authorization\";\r\n// const FORECAST_BASE_URL =\r\n//   \"https://opendata.cwb.gov.tw/api/v1/rest/datastore/F-C0032-001?Authorization\";\r\n// const LOCATION_NAME_FORECAST = \"臺北市\";\r\n// const LOCATION_NAME = \"臺北\";\r\n\r\nconst EXHIBITION_BASE_URL =\r\n  \"https://cloud.culture.tw/frontsite/trans/SearchShowAction.do?method=doFindTypeJ&category=6\";\r\nconst PARENT_CHILD_BASE_URL =\r\n  \"https://cloud.culture.tw/frontsite/trans/SearchShowAction.do?method=doFindTypeJ&category=4\";\r\nconst MOVIES_BASE_URL =\r\n  \"https://cloud.culture.tw/frontsite/trans/SearchShowAction.do?method=doFindTypeJ&category=8\";\r\nconst MUSIC_PERFORMANCE_BASE_URL =\r\n  \"https://cloud.culture.tw/frontsite/trans/SearchShowAction.do?method=doFindTypeJ&category=1\";\r\nconst LECTURE_BASE_URL =\r\n  \"https://cloud.culture.tw/frontsite/trans/SearchShowAction.do?method=doFindTypeJ&category=7\";\r\nconst VILLAGE_FOOD_BASE_URL =\r\n  \"https://data.coa.gov.tw/Service/OpenData/ODwsv/ODwsvTravelFood.aspx\";\r\n\r\n// export const fetchCurrentWeatherData = () => {\r\n//   return fetch(\r\n//     `${CURRENT_WEATHER_BASE_URL}=${AUTHORIZATION_KEY}&locationName=${LOCATION_NAME}`\r\n//   )\r\n//     .then((response) => response.json())\r\n//     .then((data) => {\r\n//       const locationData = data.records.location[0];\r\n//       const weatherElements = locationData.weatherElement.reduce(\r\n//         (neededElements, item) => {\r\n//           if ([\"WDSD\", \"TEMP\"].includes(item.elementName)) {\r\n//             neededElements[item.elementName] = item.elementValue;\r\n//           }\r\n//           return neededElements;\r\n//         },\r\n//         {}\r\n//       );\r\n\r\n//       return {\r\n//         observationTime: locationData.time.obsTime,\r\n//         locationName: locationData.locationName,\r\n//         temperature: weatherElements.TEMP,\r\n//         windSpeed: weatherElements.WDSD,\r\n//       };\r\n//     });\r\n// };\r\n\r\n// export const fetchForecastData = () => {\r\n//   return fetch(\r\n//     `${FORECAST_BASE_URL}=${AUTHORIZATION_KEY}&locationName=${LOCATION_NAME_FORECAST}`\r\n//   )\r\n//     .then((response) => response.json())\r\n//     .then((data) => {\r\n//       const locationData = data.records.location[0];\r\n//       const weatherElements = locationData.weatherElement.reduce(\r\n//         (neededElements, item) => {\r\n//           if ([\"Wx\", \"PoP\", \"CI\", \"MinT\", \"MaxT\"].includes(item.elementName)) {\r\n//             neededElements[item.elementName] = item.time[0].parameter;\r\n//           }\r\n//           return neededElements;\r\n//         },\r\n//         {}\r\n//       );\r\n\r\n//       return {\r\n//         description: weatherElements.Wx.parameterName,\r\n//         weatherCode: weatherElements.Wx.parameterValue,\r\n//         rainPossibility: weatherElements.PoP.parameterName,\r\n//         comfortability: weatherElements.CI.parameterName,\r\n//         minTemperature: weatherElements.MinT.parameterName,\r\n//         maxTemperature: weatherElements.MaxT.parameterName,\r\n//       };\r\n//     });\r\n// };\r\n\r\nexport const fetchExhibitionData = () => {\r\n  return fetch(`${EXHIBITION_BASE_URL}`)\r\n    .then((response) => response.json())\r\n    .then((data) => {\r\n      return data;\r\n    });\r\n};\r\n\r\nexport const fetchParentChildActivityData = () => {\r\n  return fetch(`${PARENT_CHILD_BASE_URL}`)\r\n    .then((response) => response.json())\r\n    .then((data) => {\r\n      return data;\r\n    });\r\n};\r\n\r\nexport const fetchMoviesData = () => {\r\n  return fetch(`${MOVIES_BASE_URL}`)\r\n    .then((response) => response.json())\r\n    .then((data) => {\r\n      return data;\r\n    });\r\n};\r\n\r\nexport const fetchMusicPerformanceData = () => {\r\n  return fetch(`${MUSIC_PERFORMANCE_BASE_URL}`)\r\n    .then((response) => response.json())\r\n    .then((data) => {\r\n      return data;\r\n    });\r\n};\r\n\r\nexport const fetchLectureData = () => {\r\n  return fetch(`${LECTURE_BASE_URL}`)\r\n    .then((response) => response.json())\r\n    .then((data) => {\r\n      return data;\r\n    });\r\n};\r\n\r\nexport const fetchVillageFoodData = () => {\r\n  return fetch(`${VILLAGE_FOOD_BASE_URL}`)\r\n    .then((response) => response.json())\r\n    .then((data) => {\r\n      return data;\r\n    });\r\n};\r\n\r\n// getPost, login, getMe\r\n\r\nconst LIDEMY_BASE_URL = \"https://student-json-api.lidemy.me\";\r\n\r\nexport const getPosts = () => {\r\n  return fetch(\r\n    `${LIDEMY_BASE_URL}/posts?_sort=createdAt&_order=desc`\r\n  ).then((response) => response.json());\r\n};\r\n\r\nexport const login = (username, password) => {\r\n  return fetch(`${LIDEMY_BASE_URL}/login`, {\r\n    method: \"POST\",\r\n    headers: {\r\n      \"content-type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify({\r\n      username,\r\n      password,\r\n    }),\r\n  }).then((res) => res.json());\r\n};\r\n\r\nexport const register = (nickname, username, password) => {\r\n  return fetch(`${LIDEMY_BASE_URL}/register`, {\r\n    method: \"POST\",\r\n    headers: {\r\n      \"content-type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify({\r\n      nickname,\r\n      username,\r\n      password,\r\n    }),\r\n  }).then((res) => res.json());\r\n};\r\n\r\nexport const getMe = () => {\r\n  const token = getAuthToken();\r\n  return fetch(`${LIDEMY_BASE_URL}/me`, {\r\n    headers: {\r\n      authorization: `Bearer ${token}`,\r\n    },\r\n  }).then((res) => res.json());\r\n};\r\n"],"sourceRoot":""}