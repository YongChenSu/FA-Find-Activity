{"version":3,"sources":["pages/LoginPage/LoginPage.jsx"],"names":["ErrMessage","styled","div","LoginPage","setUser","useContext","AuthContext","useState","username","setUsername","password","setPassword","errMessage","setErrMessage","history","useHistory","onSubmit","e","login","then","data","ok","message","setAuthToken","token","getMe","response","toString","push","value","onChange","target","type"],"mappings":"wTAQA,IAAMA,EAAaC,IAAOC,IAAV,KAiDDC,EA7CG,WAAO,IACfC,EAAYC,qBAAWC,KAAvBF,QADc,EAEUG,mBAAS,IAFnB,mBAEfC,EAFe,KAELC,EAFK,OAGUF,mBAAS,IAHnB,mBAGfG,EAHe,KAGLC,EAHK,OAIcJ,qBAJd,mBAIfK,EAJe,KAIHC,EAJG,KAKhBC,EAAUC,cAoBhB,OACE,0BAAMC,SApBa,SAACC,GACpBJ,EAAc,MACdK,YAAMV,EAAUE,GAAUS,MAAK,SAACC,GAC9B,GAAgB,IAAZA,EAAKC,GACP,OAAOR,EAAcO,EAAKE,SAE5BC,YAAaH,EAAKI,OAElBC,cAAQN,MAAK,SAACO,GACZ,GAAoB,IAAhBA,EAASL,GAEX,OADAE,YAAa,MACNV,EAAca,EAASC,YAEhCvB,EAAQsB,EAASN,MACjBN,EAAQc,KAAK,aAOf,yCACY,IACV,2BAAOC,MAAOrB,EAAUsB,SAAU,SAACb,GAAD,OAAOR,EAAYQ,EAAEc,OAAOF,WAEhE,yCACY,IACV,2BACEG,KAAK,WACLH,MAAOnB,EACPoB,SAAU,SAACb,GAAD,OAAON,EAAYM,EAAEc,OAAOF,WAG1C,gDACCjB,GAAc,kBAACZ,EAAD,KAAaY","file":"static/js/10.e742af51.chunk.js","sourcesContent":["import { useState, useContext } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { login, getMe } from \"../../WebAPI\";\r\nimport { setAuthToken } from \"../../utils/utils\";\r\nimport { AuthContext } from \"../../contexts\";\r\nimport React from \"react\";\r\n\r\nconst ErrMessage = styled.div`\r\n  color: red;\r\n`;\r\n\r\nconst LoginPage = () => {\r\n  const { setUser } = useContext(AuthContext);\r\n  const [username, setUsername] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [errMessage, setErrMessage] = useState();\r\n  const history = useHistory();\r\n  const handleSubmit = (e) => {\r\n    setErrMessage(null);\r\n    login(username, password).then((data) => {\r\n      if (data.ok === 0) {\r\n        return setErrMessage(data.message);\r\n      }\r\n      setAuthToken(data.token);\r\n\r\n      getMe().then((response) => {\r\n        if (response.ok !== 1) {\r\n          setAuthToken(null);\r\n          return setErrMessage(response.toString());\r\n        }\r\n        setUser(response.data);\r\n        history.push(\"/\");\r\n      });\r\n    });\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit}>\r\n      <div>\r\n        username:{\" \"}\r\n        <input value={username} onChange={(e) => setUsername(e.target.value)} />\r\n      </div>\r\n      <div>\r\n        password:{\" \"}\r\n        <input\r\n          type=\"password\"\r\n          value={password}\r\n          onChange={(e) => setPassword(e.target.value)}\r\n        />\r\n      </div>\r\n      <button>登入</button>\r\n      {errMessage && <ErrMessage>{errMessage}</ErrMessage>}\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default LoginPage;\r\n\r\n// import React, { useState, useEffect, createContext, useContext } from \"react\";\r\n// import styled from \"@emotion/styled\";\r\n// import LogoImg from \"../../assets/img/FA_logo.png\";\r\n// import SignInPanel from \"../../components/SignInPanel\";\r\n// import SignUpPanel from \"../../components/SignUpPanel\";\r\n\r\n// const LoginPageContainer = styled.div`\r\n//   background-color: ${({ theme }) => theme.$colorWhite};\r\n//   height: 100vh;\r\n//   display: flex;\r\n//   align-items: center;\r\n//   font-family: ${({ theme }) => theme.$fontFamily};\r\n//   padding: 1rem;\r\n// `;\r\n\r\n// const LoginPageWrapper = styled.div`\r\n//   background-color: ${({ theme }) => theme.$colorLightOrange};\r\n//   display: flex;\r\n//   max-width: 1200px;\r\n//   height: 500px;\r\n//   margin: auto;\r\n//   align-items: center;\r\n//   justify-content: center;\r\n//   padding: 2rem 1rem;\r\n//   border-radius: ${({ theme }) => theme.$borderRadius};\r\n//   box-shadow: 2px 5px 10px 8px rgba(0, 0, 0, 0.3);\r\n// `;\r\n\r\n// const LogoContainer = styled.div`\r\n//   width: 450px;\r\n//   display: flex;\r\n//   flex-direction: column;\r\n//   align-items: center;\r\n//   justify-content: center;\r\n//   height: 350px;\r\n// `;\r\n\r\n// const Logo = styled.img`\r\n//   width: 200px;\r\n//   border-radius: 50%;\r\n//   margin: 0 0 2.5rem 0;\r\n//   border: 0.5rem solid ${({ theme }) => theme.$colorRed};\r\n//   box-shadow: 3px 5px 8px 3px rgba(0, 0, 0, 0.2);\r\n//   animation: bigger infinite 1.75s linear;\r\n\r\n//   @keyframes bigger {\r\n//     50% {\r\n//       transform: scale(1.02);\r\n//     }\r\n//   }\r\n// `;\r\n\r\n// const Info = styled.div``;\r\n\r\n// const WebName = styled.div`\r\n//   color: ${({ theme }) => theme.$colorRed};\r\n//   font-size: 1.5rem;\r\n//   line-height: 2rem;\r\n//   font-weight: bold;\r\n// `;\r\n\r\n// const Slogan = styled.div`\r\n//   font-size: 1.5rem;\r\n//   line-height: 2rem;\r\n//   color: ${({ theme }) => theme.$colorGreen};\r\n//   font-weight: bold;\r\n// `;\r\n\r\n// const LoginPage = () => {\r\n//   const [isShowSignInPanel, setIsShowSignInPanel] = useState(true);\r\n//   const handleToggleSignInUp = () => {\r\n//     setIsShowSignInPanel(!isShowSignInPanel);\r\n//     console.log(isShowSignInPanel);\r\n//   };\r\n\r\n//   return (\r\n//     <LoginPageContainer>\r\n//       <LoginPageWrapper>\r\n//         <LogoContainer>\r\n//           <Logo src={LogoImg} alt=\"logo\" />\r\n//           <Info>\r\n//             <WebName>Find Activity 找活動</WebName>\r\n//             <Slogan>最新、最好玩的活動，都在 FA 找活動</Slogan>\r\n//           </Info>\r\n//         </LogoContainer>\r\n//         {isShowSignInPanel ? (\r\n//           <SignInPanel handleToggleSignInUp={handleToggleSignInUp} />\r\n//         ) : (\r\n//           <SignUpPanel handleToggleSignInUp={handleToggleSignInUp} />\r\n//         )}\r\n//       </LoginPageWrapper>\r\n//     </LoginPageContainer>\r\n//   );\r\n// };\r\n\r\n// export default LoginPage;\r\n"],"sourceRoot":""}