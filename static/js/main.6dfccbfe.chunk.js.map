{"version":3,"sources":["utils/utils.js","contexts.js","styles/base/variable.js","routes/index.js","App.js","index.js","WebAPI.js"],"names":["getAuthToken","localStorage","getItem","AuthContext","createContext","theme","main","$colorWhite","$colorRed","$colorLightGreen","$colorGreen","$colorLightOrange","$colorYellow","$colorGrey","$colorLightGrey","$borderRadius","$fontFamily","weatherCardBackgroundColor","weatherCardColor","weatherCardHighLight","dark","Home","lazy","FindActivity","Activity","NewActivity","LoginPage","Routes","fallback","exact","path","component","App","useState","activityData","setActivityData","fetchActivityData","useCallback","a","Promise","all","fetchExhibitionData","fetchParentChildActivityData","fetchMoviesData","fetchMusicPerformanceData","fetchLectureData","exhibitionData","parentChildActivityData","moviesData","musicPerformanceData","lectureData","prevState","useEffect","user","setUser","getMe","then","response","ok","data","Provider","value","ReactDOM","render","document","getElementById","fetchCurrentWeatherData","fetch","json","locationData","records","location","weatherElements","weatherElement","reduce","neededElements","item","includes","elementName","elementValue","observationTime","time","obsTime","locationName","temperature","TEMP","windSpeed","WDSD","fetchForecastData","parameter","description","Wx","parameterName","weatherCode","parameterValue","rainPossibility","PoP","comfortability","CI","minTemperature","MinT","maxTemperature","MaxT","LIDEMY_BASE_URL","token","headers","authorization","res"],"mappings":"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","file":"static/js/main.6dfccbfe.chunk.js","sourcesContent":["const TOKEN_NAME = \"token\";\n\nexport const setAuthToken = (token) => {\n  localStorage.setItem(TOKEN_NAME, token);\n};\n\nexport const getAuthToken = () => {\n  return localStorage.getItem(TOKEN_NAME);\n};\n","import { createContext } from \"react\";\n\nexport const AuthContext = createContext(null);\n","const theme = {\r\n  main: {\r\n    $colorWhite: \"#f8f8f8\",\r\n    $colorRed: \"#e6756B\",\r\n    $colorLightGreen: \"#c4c88f\",\r\n    $colorGreen: \"#8b8974\",\r\n    $colorLightOrange: \"#fae1d2\",\r\n    $colorYellow: \"#F9d893\",\r\n\r\n    $colorGrey: \"#777\",\r\n    $colorLightGrey: \"#aaa\",\r\n\r\n    $borderRadius: \"0.5rem\",\r\n    $fontFamily: \"'Varela Round', 'cwTeXYen'\",\r\n\r\n    weatherCardBackgroundColor: \"#eee\",\r\n    weatherCardColor: \"#666\",\r\n    weatherCardHighLight: \"#555\",\r\n  },\r\n  dark: {\r\n    weatherCardBackgroundColor: \"#666\",\r\n    weatherCardColor: \"#ddd\",\r\n    weatherCardHighLight: \"#fff\",\r\n  },\r\n};\r\n\r\nexport default theme;\r\n","import React, { Suspense, lazy } from \"react\";\nimport { HashRouter as Router, Switch, Route } from \"react-router-dom\";\nconst Home = lazy(() => import(\"../pages/Home\"));\nconst FindActivity = lazy(() => import(\"../pages/FindActivity\"));\nconst Activity = lazy(() => import(\"../pages/Activity\"));\nconst NewActivity = lazy(() => import(\"../pages/NewActivity\"));\nconst LoginPage = lazy(() => import(\"../pages/LoginPage\"));\n\nconst Routes = () => {\n  return (\n    <Suspense fallback={<div></div>}>\n      <Switch>\n        <Route exact path=\"/\" component={Home} />\n        <Route path=\"/find-activity\" component={FindActivity} />\n        <Route path=\"/activity\" component={Activity} />\n        <Route path=\"/new-activity\" component={NewActivity} />\n        <Route path=\"/login-page\" component={LoginPage} />\n      </Switch>\n    </Suspense>\n  );\n};\n\nexport default Routes;\n","import React, { Component, useState, useEffect, useCallback } from \"react\";\nimport Routes from \"./routes\";\nimport { HashRouter as Router } from \"react-router-dom\";\nimport \"./styles/main.sass\";\nimport { ThemeProvider } from \"emotion-theming\";\nimport theme from \"./styles/base/variable\";\nimport { AuthContext } from \"../src/contexts\";\nimport { getAuthToken } from \"./utils/utils\";\nimport {\n  fetchExhibitionData,\n  fetchParentChildActivityData,\n  fetchMoviesData,\n  fetchMusicPerformanceData,\n  fetchLectureData,\n  fetchVillageFoodData,\n  getMe,\n} from \"../src/WebAPI\";\n\nconst App = () => {\n  const [activityData, setActivityData] = useState({});\n  const fetchActivityData = useCallback(async () => {\n    const [\n      exhibitionData,\n      parentChildActivityData,\n      moviesData,\n      musicPerformanceData,\n      lectureData,\n      // villageFoodData,\n    ] = await Promise.all([\n      fetchExhibitionData(),\n      fetchParentChildActivityData(),\n      fetchMoviesData(),\n      fetchMusicPerformanceData(),\n      fetchLectureData(),\n      // fetchVillageFoodData(),\n    ]);\n\n    setActivityData((prevState) => ({\n      ...exhibitionData,\n      ...parentChildActivityData,\n      ...moviesData,\n      ...musicPerformanceData,\n      ...lectureData,\n      // ...villageFoodData,\n    }));\n  }, []);\n\n  useEffect(() => {\n    fetchActivityData();\n  }, [fetchActivityData]);\n\n  const [user, setUser] = useState(null);\n  useEffect(() => {\n    if (getAuthToken() !== null) {\n      getMe().then((response) => {\n        if (response.ok === 1) {\n          setUser(response.data);\n        }\n      });\n    }\n  }, []);\n\n  return (\n    <AuthContext.Provider\n      value={{ activityData, setActivityData, user, setUser }}\n    >\n      <ThemeProvider theme={theme.main}>\n        <Router>\n          <Routes />\n        </Router>\n      </ThemeProvider>\n    </AuthContext.Provider>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n","import { getAuthToken } from \"./utils/utils\";\n\nconst AUTHORIZATION_KEY = \"CWB-15DFF2FC-FFFB-49E9-BF7F-EBB9164F4B47\";\nconst CURRENT_WEATHER_BASE_URL =\n  \"https://opendata.cwb.gov.tw/api/v1/rest/datastore/O-A0003-001?Authorization\";\nconst FORECAST_BASE_URL =\n  \"https://opendata.cwb.gov.tw/api/v1/rest/datastore/F-C0032-001?Authorization\";\nconst LOCATION_NAME_FORECAST = \"臺北市\";\nconst LOCATION_NAME = \"臺北\";\n\nconst EXHIBITION_BASE_URL =\n  \"https://cloud.culture.tw/frontsite/trans/SearchShowAction.do?method=doFindTypeJ&category=6\";\nconst PARENT_CHILD_BASE_URL =\n  \"https://cloud.culture.tw/frontsite/trans/SearchShowAction.do?method=doFindTypeJ&category=4\";\nconst MOVIES_BASE_URL =\n  \"https://cloud.culture.tw/frontsite/trans/SearchShowAction.do?method=doFindTypeJ&category=8\";\nconst MUSIC_PERFORMANCE_BASE_URL =\n  \"https://cloud.culture.tw/frontsite/trans/SearchShowAction.do?method=doFindTypeJ&category=1\";\nconst LECTURE_BASE_URL =\n  \"https://cloud.culture.tw/frontsite/trans/SearchShowAction.do?method=doFindTypeJ&category=7\";\nconst VILLAGE_FOOD_BASE_URL =\n  \"https://data.coa.gov.tw/Service/OpenData/ODwsv/ODwsvTravelFood.aspx\";\n\nexport const fetchCurrentWeatherData = () => {\n  return fetch(\n    `${CURRENT_WEATHER_BASE_URL}=${AUTHORIZATION_KEY}&locationName=${LOCATION_NAME}`\n  )\n    .then((response) => response.json())\n    .then((data) => {\n      const locationData = data.records.location[0];\n      const weatherElements = locationData.weatherElement.reduce(\n        (neededElements, item) => {\n          if ([\"WDSD\", \"TEMP\"].includes(item.elementName)) {\n            neededElements[item.elementName] = item.elementValue;\n          }\n          return neededElements;\n        },\n        {}\n      );\n\n      return {\n        observationTime: locationData.time.obsTime,\n        locationName: locationData.locationName,\n        temperature: weatherElements.TEMP,\n        windSpeed: weatherElements.WDSD,\n      };\n    });\n};\n\nexport const fetchForecastData = () => {\n  return fetch(\n    `${FORECAST_BASE_URL}=${AUTHORIZATION_KEY}&locationName=${LOCATION_NAME_FORECAST}`\n  )\n    .then((response) => response.json())\n    .then((data) => {\n      const locationData = data.records.location[0];\n      const weatherElements = locationData.weatherElement.reduce(\n        (neededElements, item) => {\n          if ([\"Wx\", \"PoP\", \"CI\", \"MinT\", \"MaxT\"].includes(item.elementName)) {\n            neededElements[item.elementName] = item.time[0].parameter;\n          }\n          return neededElements;\n        },\n        {}\n      );\n\n      return {\n        description: weatherElements.Wx.parameterName,\n        weatherCode: weatherElements.Wx.parameterValue,\n        rainPossibility: weatherElements.PoP.parameterName,\n        comfortability: weatherElements.CI.parameterName,\n        minTemperature: weatherElements.MinT.parameterName,\n        maxTemperature: weatherElements.MaxT.parameterName,\n      };\n    });\n};\n\nexport const fetchExhibitionData = () => {\n  return fetch(`${EXHIBITION_BASE_URL}`)\n    .then((response) => response.json())\n    .then((data) => {\n      return data;\n    });\n};\n\nexport const fetchParentChildActivityData = () => {\n  return fetch(`${PARENT_CHILD_BASE_URL}`)\n    .then((response) => response.json())\n    .then((data) => {\n      return data;\n    });\n};\n\nexport const fetchMoviesData = () => {\n  return fetch(`${MOVIES_BASE_URL}`)\n    .then((response) => response.json())\n    .then((data) => {\n      return data;\n    });\n};\n\nexport const fetchMusicPerformanceData = () => {\n  return fetch(`${MUSIC_PERFORMANCE_BASE_URL}`)\n    .then((response) => response.json())\n    .then((data) => {\n      return data;\n    });\n};\n\nexport const fetchLectureData = () => {\n  return fetch(`${LECTURE_BASE_URL}`)\n    .then((response) => response.json())\n    .then((data) => {\n      return data;\n    });\n};\n\nexport const fetchVillageFoodData = () => {\n  return fetch(`${VILLAGE_FOOD_BASE_URL}`)\n    .then((response) => response.json())\n    .then((data) => {\n      return data;\n    });\n};\n\n// getPost, login, getMe\n\nconst LIDEMY_BASE_URL = \"https://student-json-api.lidemy.me\";\n\nexport const getPosts = () => {\n  return fetch(\n    `${LIDEMY_BASE_URL}/posts?_sort=createdAt&_order=desc`\n  ).then((response) => response.json());\n};\n\nexport const login = (username, password) => {\n  return fetch(`${LIDEMY_BASE_URL}/login`, {\n    method: \"POST\",\n    headers: {\n      \"content-type\": \"application/json\",\n    },\n    body: JSON.stringify({\n      username,\n      password,\n    }),\n  }).then((res) => res.json());\n};\n\nexport const getMe = () => {\n  const token = getAuthToken();\n  return fetch(`${LIDEMY_BASE_URL}/me`, {\n    headers: {\n      authorization: `Bearer ${token}`,\n    },\n  }).then((res) => res.json());\n};\n"],"sourceRoot":""}